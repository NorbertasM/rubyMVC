<%= form_with(model: channel) do |form| %> 
  <% if channel.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(channel.errors.count, "error") %> prohibited this channel from being saved:</h2>

      <ul>
        <% channel.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <%= form.label :title, style: "display: block" %>
    <%= form.text_field :title, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label "Stream Description", style: "display: block" %>
    <%= form.text_area :description, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :stream_link, style: "display: block" %>
    <%= form.text_area :stream_link, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :preview_url, style: "display: block" %>
    <%= form.text_area :preview_url, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label "About you", style: "display: block" %>
    <%= form.text_area :about, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label "Stream Language", style: "display: block" %>
    <%= select(:channel, :language_id, options_for_select(@languages, :selected => :language_id), { }, { :class => 'form-select' }) %>
  </div>

  <div class="mb-2 border-bottom">
    <%= form.label "Channel Tags:", style: "display: block" %>
    <% if !@tags.nil? %>
      <% @tags.each do |tag| %>
        <%= form.label tag["name"] %>
        <%= form.check_box :tags, {multiple: true, skip_default_ids: false, class: "form-check-input", }, tag["id"], nil %>  
      <% end %>
    <% end %>
  </div>

  <div class="mb-2 border-bottom">
    <%= form.label "Played games:", style: "display: block" %>
    <% @games.each do |option| %>
      <%= form.label option["name"] %>
      <%=form.check_box :games, { multiple: true, skip_default_ids: false, class: "form-check-input" }, option["id"], nil %> 
    <%end%>
  </div>

  <div class="mt-3">
    <% if current_page?(new_channel_path) %>
      <%= link_to "Cancel", channels_path, class: "btn btn-outline-primary" %>
    <% else %>
      <%= link_to "Cancel", @channel, class: "btn btn-outline-primary" %>
    <% end %>
    <%= form.submit class: "btn btn-primary"%>
  </div>
<% end %>
